### 事务基本要素
- 原子性
- 一致性
- 持久性
- 隔离性
### 隔离级别
- 可重复读 
- 读已提交
- 读未提交
- 串行化

### Mysql默认隔离级别
- Mysql默认使用可重复读,但实际上互联网项目中使用的是读已提交
- 默认重复读是因为binlog日志复制,主从复制问题,数据会不一致
> 1. 当执行两个client端分别执del和insert sql语句时,binlog Statement 格式导致,修改了读已提交,会锁住,保证顺序
> 2. 修改binlog日志格式为row格式,保证先后顺序   

## Mysql如何写入磁盘中
- 数据库引擎会将数据写入到buff pool 中,由redolog 和 binlog写入磁盘 

## Mysql 索引
- Mysql索引主要有两种结构 Hash索引和B+树,InnoDb 默认b+树
### B+ Tree索引和Hash索引区别？

1. 哈希索引适合等值查询，但是无法进行范围查询 
2. 哈希索引没办法利用索引完成排序 
3. 哈希索引不支持多列联合索引的最左匹配规则 
4. 如果有大量重复键值的情况下，哈希索引的效率会很低，因为存在哈希碰撞问题

### B+ Tree 索引类型
1. 索引B+ Tree的叶子节点存储了整行数据的是主键索引，也被称之为聚簇索引
2. 索引B+ Tree的叶子节点存储了主键的值的是非主键索引，也被称之为非聚簇索引
3. 主键索引查询只会查一次，而非主键索引可能需要回表查询多次,但不一定会查询多次(通过索引覆盖可以查询一次)
4. 索引覆盖:当查询field为联合索引时,就可以通过索引覆盖查询一次: 比如联合索引 idx_key1_key2(key1,key2) select key2 from table where key1 = 'xx'

### 联合索引 最左前缀匹配
1. 当我们创建一个联合索引的时候，如(key1,key2,key3)，相当于创建了（key1）、(key1,key2)和(key1,key2,key3)三个索引，这就是最左匹配原则
### 查询优化器
一条sql查询可以有不同的方式,最终查询优化器会选择执行成本最低的方式
1. 根据搜索条件，找出所有可能使用的索引 
2. 计算全表扫描的代价 
3. 计算使用不同索引执行查询的代价 
4. 对比各种执行方案的代价，找出成本最低的那一个